# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: lhclusters.littlehorse.io
spec:
  group: littlehorse.io
  names:
    kind: LHCluster
    plural: lhclusters
    shortNames:
    - lhc
    singular: lhcluster
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.server.replicas
      name: REPLICAS
      priority: 0
      type: integer
    - jsonPath: .status.adminPrincipal
      name: ADMINPRINCIPAL
      priority: 0
      type: string
    - jsonPath: .status.kafkaType
      name: KAFKATYPE
      priority: 0
      type: string
    - jsonPath: .status.partitions
      name: PARTITIONS
      priority: 0
      type: integer
    - jsonPath: .status.problems
      name: PROBLEMS
      priority: 0
      type: string
    name: v1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              defaultLabels:
                additionalProperties:
                  type: string
                type: object
              kafka:
                properties:
                  clusterPartitions:
                    type: integer
                  externalClusterRef:
                    properties:
                      bootstrapServers:
                        type: string
                      createTopics:
                        type: boolean
                      kafkaKeyStore:
                        properties:
                          name:
                            type: string
                        required:
                        - name
                        type: object
                      kafkaTrustStore:
                        properties:
                          name:
                            type: string
                        required:
                        - name
                        type: object
                      saslJaasConfig:
                        properties:
                          name:
                            type: string
                        required:
                        - name
                        type: object
                      saslMechanism:
                        type: string
                      securityProtocol:
                        type: string
                    required:
                    - securityProtocol
                    - bootstrapServers
                    type: object
                  lhKafkaRef:
                    properties:
                      clusterName:
                        type: string
                      clusterWideQuotas:
                        properties:
                          consumerThroughputPerSecond:
                            anyOf:
                            - type: integer
                            - type: string
                            nullable: true
                            x-kubernetes-int-or-string: true
                          producerThroughputPerSecond:
                            anyOf:
                            - type: integer
                            - type: string
                            nullable: true
                            x-kubernetes-int-or-string: true
                        required:
                        - producerThroughputPerSecond
                        - consumerThroughputPerSecond
                        type: object
                    required:
                    - clusterName
                    - clusterWideQuotas
                    type: object
                  replicationFactor:
                    type: integer
                  strimziClusterRef:
                    properties:
                      clusterName:
                        type: string
                      createTopics:
                        type: boolean
                      listener:
                        properties:
                          authentication:
                            type: string
                          port:
                            type: integer
                          tls:
                            type: boolean
                        required:
                        - port
                        type: object
                      quotas:
                        properties:
                          consumerByteRate:
                            nullable: true
                            type: integer
                          controllerMutationRate:
                            nullable: true
                            type: number
                          producerByteRate:
                            nullable: true
                            type: integer
                          requestPercentage:
                            nullable: true
                            type: integer
                        type: object
                    required:
                    - clusterName
                    - createTopics
                    - listener
                    type: object
                required:
                - clusterPartitions
                type: object
              podMonitor:
                properties:
                  metricRelabelings:
                    items:
                      properties:
                        action:
                          type: string
                        modulus:
                          type: integer
                        regex:
                          type: string
                        replacement:
                          type: string
                        separator:
                          type: string
                        sourceLabels:
                          items:
                            type: string
                          type: array
                        targetLabel:
                          type: string
                      type: object
                    type: array
                  podMonitorLabels:
                    additionalProperties:
                      type: string
                    type: object
                type: object
              server:
                properties:
                  authentication:
                    nullable: true
                    properties:
                      mtls:
                        properties:
                          clientCaCert:
                            properties:
                              secretRef:
                                properties:
                                  name:
                                    type: string
                                required:
                                - name
                                type: object
                            required:
                            - secretRef
                            type: object
                        required:
                        - clientCaCert
                        type: object
                      oauth:
                        properties:
                          credentials:
                            properties:
                              secretRef:
                                properties:
                                  name:
                                    type: string
                                required:
                                - name
                                type: object
                            required:
                            - secretRef
                            type: object
                          introspectionEndpointUrl:
                            type: string
                        required:
                        - introspectionEndpointUrl
                        - credentials
                        type: object
                    type: object
                  compute:
                    nullable: true
                    properties:
                      cpu:
                        anyOf:
                        - type: integer
                        - type: string
                        nullable: true
                        x-kubernetes-int-or-string: true
                      memory:
                        anyOf:
                        - type: integer
                        - type: string
                        nullable: true
                        x-kubernetes-int-or-string: true
                    type: object
                  coreStreamsCommitIntervalMs:
                    description: Sets `commit.interval.ms` for the Core topology.
                    nullable: true
                    type: integer
                  hotStandbyReplicas:
                    description: The number of Kafka Streams standby replicas
                    type: integer
                  image:
                    type: string
                  imagePullPolicy:
                    type: string
                  internalPort:
                    properties:
                      mtls:
                        properties:
                          secretRef:
                            properties:
                              name:
                                type: string
                            required:
                            - name
                            type: object
                        required:
                        - secretRef
                        type: object
                    required:
                    - mtls
                    type: object
                  lingerMs:
                    nullable: true
                    type: integer
                  listeners:
                    items:
                      properties:
                        advertisedListeners:
                          properties:
                            bootstrap:
                              nullable: true
                              properties:
                                host:
                                  type: string
                              required:
                              - host
                              type: object
                            serverHostSuffix:
                              nullable: true
                              type: string
                            servers:
                              items:
                                properties:
                                  host:
                                    type: string
                                  port:
                                    type: integer
                                required:
                                - host
                                - port
                                type: object
                              nullable: true
                              type: array
                          type: object
                        authentication:
                          properties:
                            type:
                              type: string
                          required:
                          - type
                          type: object
                        infrastructure:
                          nullable: true
                          properties:
                            ingress:
                              properties:
                                ingressAnnotations:
                                  additionalProperties:
                                    type: string
                                  type: object
                                ingressClassName:
                                  type: string
                              required:
                              - ingressClassName
                              type: object
                            istio:
                              properties:
                                gateway:
                                  properties:
                                    port:
                                      nullable: true
                                      type: integer
                                    selector:
                                      additionalProperties:
                                        type: string
                                      type: object
                                  required:
                                  - selector
                                  type: object
                              required:
                              - gateway
                              type: object
                          type: object
                        name:
                          type: string
                        port:
                          type: integer
                        tls:
                          properties:
                            issuerRef:
                              type: string
                            secretRef:
                              properties:
                                name:
                                  type: string
                              required:
                              - name
                              type: object
                          type: object
                      required:
                      - name
                      - port
                      type: object
                    type: array
                  logLevel:
                    type: string
                  nodeSelector:
                    additionalProperties:
                      type: string
                    description: Node Selector for LH Server pods.
                    type: object
                  operatorListener:
                    nullable: true
                    properties:
                      name:
                        type: string
                      port:
                        type: integer
                    type: object
                  podAnnotations:
                    additionalProperties:
                      type: string
                    description: Labels to put on LH Server Pods
                    type: object
                  podLabels:
                    additionalProperties:
                      type: string
                    description: Annotations to put on LH Server Pods
                    type: object
                  priorityClassName:
                    description: Priority Class for LH Server pods.
                    nullable: true
                    type: string
                  rackAwareness:
                    nullable: true
                    properties:
                      zoneIds:
                        items:
                          type: string
                        type: array
                      zoneKey:
                        type: string
                    required:
                    - zoneKey
                    - zoneIds
                    type: object
                  replicas:
                    minimum: 1.0
                    type: integer
                  serviceAnnotations:
                    additionalProperties:
                      type: string
                    description: Annotations to put on LH Server Services
                    type: object
                  serviceLabels:
                    additionalProperties:
                      type: string
                    description: Labels to put on LH Server Services
                    type: object
                  storage:
                    properties:
                      storageClassName:
                        type: string
                      volumeSize:
                        anyOf:
                        - type: integer
                        - type: string
                        nullable: true
                        x-kubernetes-int-or-string: true
                    required:
                    - storageClassName
                    - volumeSize
                    type: object
                  streamsMetricsLevel:
                    nullable: true
                    type: string
                  tolerations:
                    description: Tolerations for LH Server pods.
                    items:
                      properties:
                        effect:
                          type: string
                        key:
                          type: string
                        operator:
                          type: string
                        tolerationSeconds:
                          type: integer
                        value:
                          type: string
                      type: object
                    type: array
                  version:
                    type: string
                required:
                - replicas
                - storage
                type: object
            required:
            - kafka
            - server
            type: object
          status:
            properties:
              adminPrincipal:
                type: string
              kafkaType:
                enum:
                - EXTERNAL
                - LHKAFKA
                - STRIMZI
                type: string
              lastBounceTime:
                type: integer
              lastBouncedPod:
                type: integer
              observedGeneration:
                type: integer
              partitions:
                type: integer
              problems:
                type: string
              volumeSizeInternal:
                anyOf:
                - type: integer
                - type: string
                nullable: true
                x-kubernetes-int-or-string: true
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
